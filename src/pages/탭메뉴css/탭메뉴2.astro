---
const menu = [
  { name: '검진상품 선택', dataTab: 'tab1' },
  { name: '검사소 찾기', dataTab: 'tab2' },
  { name: '검사소 방문', dataTab: 'tab3' },
  { name: '검진 리포트 확인', dataTab: 'tab4' },
]

const menualList = [
  {
    id: 'tab1',
    title: '검진상품 선택',
    content: '메인 페이지에서 검진 상품을 선택하세요.',
    subContent: '※ 구매 하신 분에게는 확인 문자를 전송해 드립니다.',
  },
  {
    id: 'tab2',
    title: '가까운 검사소를 찾기',
    content: '상단 메뉴',
    subContent_1: '검사소 찾기',
    subContent_2: '를 선택하세요.',
    subContent: '※ 우편번호(Zip Code)를 입력하세요.',
  },
  {
    id: 'tab3',
    title: '검사소 방문하기',
    content: '검사소 방문 전 안내문자를 꼭 확인하세요.',
    subContent: '※ 예약 없이도 방문이 가능합니다.',
  },
  {
    id: 'tab4',
    title: '검사 리포트 확인하기',
    content: '마이페이지에서 검진 결과를\n확인하실 수 있습니다.',
    subContent: '※ 검사 결과 발행 안내 문자를 보내드립니다.',
  },
]
---

<section w-w="full" w-h="full" w-z="40">
  <div
    w-p="<lg:x-1/20 y-150px"
    w-m="x-auto"
    w-container="~"
    w-h="full"
    w-w="md:96rem"
    class="wrapper"
  >
    <ul
      w-whitespace="nowrap"
      w-text="1.5rem center"
      w-pos="relative"
      w-p="y-2 "
      w-overflow="x-hidden x-scroll"
    >
      {menu.map((data, idx) => (
        <li
          class="tab_bar"
          data-tab={data.dataTab}
          w-p="b-2"
          w-w="1/4 <md:2/4"
          w-display="inline-block"
          w-text="1.5rem <lg:1rem"
          w-cursor="pointer"
          w-transition="duration-100"
        >
          <span
            w-font="italic"
            w-m="r-2"
            w-text="1.563rem <lg:1rem"
            w-pointer="none"
          >
            {idx + 1 + '.'}
          </span>
          {data.name}
        </li>
      ))}
      <hr
        w-pos="absolute bottom-1 left-0 right-0"
        w-w="full <md:168vw"
        w-bg="blue-500"
      />
      <div
        class="slider"
        w-pos="absolute bottom-0 left-0"
        w-w="1/4 <md:1/2"
        w-h="1"
        w-bg="black"
      >
      </div>
    </ul>
    <div w-h="66.1rem" w-w="full" w-overflow="hidden">
      <ul
        class="tab_slider"
        w-m="t-30px"
        w-w="full "
        w-h="full"
        w-pos="relative"
        w-z="10"
        w-whitespace="nowrap"
      >
        {menualList.map((data, idx) => (
          <li
            id={data.id}
            class="tab_content"
            w-display="inline-block"
            w-pos="relative"
            w-w="full"
            w-h="full"
          >
            <p
              class="fade-in-box "
              w-text="3.75rem [#CCCCCC] <lg:2rem"
              w-font="italic bold"
              w-m="b-30px"
            >
              Step {idx + 1 + '.'}
            </p>
            <p w-text="3.375rem <lg:1.75rem" w-font="bold">
              {data.title}
            </p>
            <div
              w-flex="~"
              w-text="2.125rem <lg:1.125rem"
              w-m="b-50px"
              w-h="120px <md:40px"
              w-whitespace="pre-line"
              w-font="!leading-[1.2]"
            >
              {data.content}
              <span w-text="[#E64747]" w-font="bold">
                {data.subContent_1}
              </span>
              {data.subContent_2}
            </div>
            <p w-text="1.563rem <lg:0.75rem" w-m="b-30px">
              {data.subContent}
            </p>
            <button
              w-text="1.25rem [#707070]  <lg:0.75rem"
              w-border="1px [#707070] rounded-3xl"
              w-p="x-6 y-2"
            >
              자세히보기
            </button>
            <div
              w-m="<md:t-30px <md:x-auto"
              w-w="4/10 <md:full"
              w-h="full"
              w-bg="blue-500"
              w-pos="absolute bottom-0 right-1 <md:relative"
            ></div>
          </li>
        ))}
      </ul>
    </div>
  </div>
</section>
<script>
  const tabs = document.querySelector('.wrapper')
  const slideBar = document.querySelector('.slider')
  const tabSection = document.querySelectorAll('.tab_content')
  const tabBar = document.querySelectorAll('.tab_bar')
  const tabSlider = document.querySelector('.tab_slider')

  const mediaQuery = window.matchMedia('(max-width: 768px)')
  const list = {}

  const bar = ['0%', '25%', '50%', '75%']
  const img = ['0%', '-100%', '-200%', '-300%']
  const bar2 = ['0%', '50%', '100%', '150%']
  tabBar.forEach((el, idx) => {
    el.onclick = () => {
      slideBar.style.left = bar[idx]
      tabSlider.style.transform = `translateX(${img[idx]})`
    }
  })
  // tabs.onclick = (e) => {
  //   const id = e.target.dataset.tab

  //   if (id) {
  //   }

  //   if (id === 'tab1') {
  //     slideBar.style.left = '0%'
  //     tabSlider.style.transform = 'translateX(0%)'
  //   }
  //   if (id === 'tab2') {
  //     slideBar.style.left = '25%'
  //     tabSlider.style.transform = 'translateX(-100%)'

  //     if (mediaQuery.matches) {
  //       slideBar.style.left = '50%'
  //     }
  //   }
  //   if (id === 'tab3') {
  //     slideBar.style.left = '50%'
  //     tabSlider.style.transform = 'translateX(-200%)'
  //     if (mediaQuery.matches) {
  //       slideBar.style.left = '100%'
  //     }
  //   }
  //   if (id === 'tab4') {
  //     slideBar.style.left = '75%'
  //     tabSlider.style.transform = 'translateX(-300%)'
  //     if (mediaQuery.matches) {
  //       slideBar.style.left = '150%'
  //     }
  //   }
  // }
</script>

<style>
  .tab_slider {
    transition: 0.3s ease-out;
    transform: translateX(0%);
  }
  .tab_content {
    transition: 0.5s ease;
  }
  .slider {
    left: 0vw;
    transition: 0.3s ease-out;
  }
</style>
